import Base from"../Base.js";import"../ea-icon/index.js";import{stylesheet}from"./src/style/stylesheet.js";import{SVGComm}from"./src/components/SVGComm.js";export class EaProgress extends Base{#t;#e;#s;#r;constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML='\n            <div class="ea-progress_wrap" part="container">\n                <section class="ea-progress_track" part="track-wrap">\n                    <section class="ea-progress_path" part="path"></section>\n                </section>\n                <section class="ea-progress_text" part="text-wrap"></section>\n            </div>\n        ',this.#t=t.querySelector(".ea-progress_wrap"),this.#e=t.querySelector(".ea-progress_track"),this.#s=t.querySelector(".ea-progress_path"),this.#r=t.querySelector(".ea-progress_text"),this.build(t,stylesheet)}get type(){return this.getAttribute("type")}set type(t){if(t)switch(this.setAttribute("type",t),this.type){case"circle":this.#i("circle");break;case"dashboard":this.#i("dashboard")}}get percentage(){return this.getAttribute("percentage")||0}#a(t){return 302*(100-Number(t))/100}#h(t){return 152*(100-Number(t))/100+100}set percentage(t){if(!isNaN(Number(t)))switch(Number(t)<0?t=0:Number(t)>100&&(t=100),this.setAttribute("percentage",t),(this.textInside||"dashboard"===this.type||"circle"===this.type)&&(this.#r.innerHTML=`${t}%`),this.type){case"circle":this.#s.style.strokeDashoffset=`${this.#a(t)}px`;break;case"dashboard":this.#s.style.strokeDashoffset=`${this.#h(t)}px`;break;default:this.#s.style.width=`${t}%`,this.textInside&&this.#c(t)}}get statusList(){return{success:{icon:"icon-ok-circled",color:"#67c23a"},warning:{icon:"icon-attention-circled",color:"#e6a23c"},exception:{icon:"icon-cancel-circled",color:"#f56c6c"},primary:{}}}#o(t,e){!this.type&&this.textInside||"dashboard"===this.type||"circle"===this.type?this.#r.innerText=`${this.percentage}%`:this.#r.innerText="",this.#r.className=`${e} ${this.statusList[t].icon||""}`,this.#r.style.color=this.statusList[t].color}get status(){return this.getAttribute("status")||"primary"}set status(t){switch(this.setAttribute("status",t),this.type){case"circle":this.#o(t,"ea-progress_text--circle"),this.#s.style.stroke=this.statusList[t].color;break;case"dashboard":this.#o(t,"ea-progress_text--dashboard"),this.#s.style.stroke=this.statusList[t].color;break;default:this.#o(t,"ea-progress_text"),this.#s.style.backgroundColor=this.statusList[t].color}}get textInside(){return this.getAttrBoolean("text-inside")}set textInside(t){"circle"!==this.type&&t&&(this.setAttribute("text-inside",t),this.#c(t))}get strokeWidth(){return this.getAttribute("stroke-width")}set strokeWidth(t){t=t?Number(t):4,this.toggleAttr("stroke-width",t),"circle"===this.type||"dashboard"===this.type?(this.#e.style.strokeWidth=`${t}px`,this.#s.style.strokeWidth=`${t}px`):(t+=4,this.#e.style.height=`${t}px`,this.#e.style.lineHeight=`${t}px`,this.#s.style.height=`${t}px`,this.#s.style.lineHeight=`${t}px`,this.#t.style.height=`${t}px`,this.#t.style.lineHeight=`${t}px`)}#i(t){this.#t.style.height="126px",this.#t.style.width="126px",this.#t.innerHTML=SVGComm[t];const e=this.#t.querySelector(`circle[class="track--${t}"]`),s=this.#t.querySelector(`circle[class="path--${t}"]`),r=this.#t.querySelector(`span[class="ea-progress_text--${t}"]`);this.#e=e,this.#s=s,this.#r=r}#c(t){t?(this.#r.style.display="none",this.#s.innerText=`${this.percentage}%`):(this.#r.style.display="block",this.#s.innerText="")}connectedCallback(){this.type=this.type,this.percentage=this.percentage,this.status=this.status,this.textInside=this.textInside,this.strokeWidth=this.strokeWidth}}customElements.get("ea-progress")||customElements.define("ea-progress",EaProgress);