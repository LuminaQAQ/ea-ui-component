import{createElement}from"../../../../utils/createElement.js";export class EaMessageBox{constructor(e){this.isPrompt=e}get attrs(){return["cancelButtonText","confirmButtonText"]}#e(e,t,r){r.forEach((r=>{t[r]&&(e[r]=t[r])}))}#t(e){e.remove()}open(e,t,r){const s=createElement("ea-message-box");return s.addEventListener("ready",(()=>{this.isPrompt&&(s.isPrompt=!0),s.reg=new RegExp(r.reg),s.style.setProperty("--invalid-message",`"${r.invalidMessage}"`),s.inputPlaceholder=r.inputPlaceholder})),document.body.appendChild(s),s.open=!0,s.content=e,s.title=t,this.#e(s,r,this.attrs),new Promise(((e,t)=>{s.addEventListener("cancel",(()=>{this.#t(s),t()})),s.addEventListener("confirm",(t=>{if(this.isPrompt&&!r.reg.test(t.detail.value))return t.detail.target.setAttribute("aria-invalid",!0),void t.detail.target.focus();this.#t(s),this.isPrompt?e(t.detail.value):e(!0)}))}))}}